<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Frogger Game - TowMes™©</title>
    <style>
        /* التنسيقات المستخرجة من مفع style.css */
        body { text-align: center; font-family: sans-serif; background-color: #f0f0f0; }
        
        .grid {
            border: 1px solid black;
            height: 450px;
            width: 450px;
            display: flex;
            flex-wrap: wrap;
            margin: 20px auto;
            background-color: #fff;
        }

        .grid div { height: 50px; width: 50px; }

        .ending-block { background-color: red; } /* نقطة النهاية */
        .starting-block { background-color: blue; } /* نقطة البداية */
        .l1, .l2, .l3 { background-color: brown; } /* الأخشاب */
        .l4, .l5 { background-color: lightblue; } /* الماء */
        .c1 { background-color: black; } /* السيارات */
        .c2, .c3 { background-color: lightgrey; } /* الطريق */
        .frog { background-color: green; border-radius: 50%; } /* الضفدع */

        #start-pause-button {
            padding: 10px 20px; font-size: 1rem; cursor: pointer;
            background-color: #8b0000; color: white; border: none; border-radius: 5px;
        }
    </style>
</head>
<body>

    <h1>لعبة الضفدع - Frogger</h1>
    <h2>الوقت المتبقي: <span id="time-left">20</span></h2>
    <h2>النتيجة: <span id="result"></span></h2>

    <button id="start-pause-button">Start</button>

    <div class="grid">
        <div></div><div></div><div></div><div></div><div class="ending-block"></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>
        <div class="log-left l1"></div><div class="log-left l2"></div><div class="log-left l3"></div><div class="log-left l4"></div><div class="log-left l5"></div><div class="log-left l1"></div><div class="log-left l2"></div><div class="log-left l3"></div><div class="log-left l4"></div>
        <div class="log-right l5"></div><div class="log-right l1"></div><div class="log-right l2"></div><div class="log-right l3"></div><div class="log-right l4"></div><div class="log-right l5"></div><div class="log-right l1"></div><div class="log-right l2"></div><div class="log-right l3"></div>
        <div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>
        <div class="car-left c1"></div><div class="car-left c2"></div><div class="car-left c3"></div><div class="car-left c1"></div><div class="car-left c2"></div><div class="car-left c3"></div><div class="car-left c1"></div><div class="car-left c2"></div><div class="car-left c3"></div>
        <div class="car-right c1"></div><div class="car-right c2"></div><div class="car-right c3"></div><div class="car-right c1"></div><div class="car-right c2"></div><div class="car-right c3"></div><div class="car-right c1"></div><div class="car-right c2"></div><div class="car-right c3"></div>
        <div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div class="starting-block frog"></div><div></div><div></div><div></div><div></div>
    </div>

    <script>
        /* منطق اللعبة المستخرج من ملف app.js */
        const timeLeftDisplay = document.querySelector('#time-left');
        const resultDisplay = document.querySelector('#result');
        const startPauseButton = document.querySelector('#start-pause-button');
        const squares = document.querySelectorAll('.grid div');
        const logsLeft = document.querySelectorAll('.log-left');
        const logsRight = document.querySelectorAll('.log-right');
        const carsLeft = document.querySelectorAll('.car-left');
        const carsRight = document.querySelectorAll('.car-right');

        let currentIndex = 76; // موقع البداية
        const width = 9;
        let timerId;
        let outcomeTimerId;
        let currentTime = 20;

        function moveFrog(e) {
            squares[currentIndex].classList.remove('frog');
            switch(e.key) {
                case 'ArrowLeft' : if (currentIndex % width !== 0) currentIndex -= 1; break;
                case 'ArrowRight' : if (currentIndex % width < width - 1) currentIndex += 1; break;
                case 'ArrowUp' : if (currentIndex - width >= 0) currentIndex -= width; break;
                case 'ArrowDown' : if (currentIndex + width < width * width) currentIndex += width; break;
            }
            squares[currentIndex].classList.add('frog');
        }

        function autoMoveElements() {
            currentTime--;
            timeLeftDisplay.textContent = currentTime;
            logsLeft.forEach(logLeft => moveLogLeft(logLeft));
            logsRight.forEach(logRight => moveLogRight(logRight));
            carsLeft.forEach(carLeft => moveCarLeft(carLeft));
            carsRight.forEach(carRight => moveCarRight(carRight));
        }

        function checkOutComes() { lose(); win(); }

        function moveLogLeft(logLeft) {
            const classes = ['l1', 'l2', 'l3', 'l4', 'l5'];
            let index = classes.findIndex(c => logLeft.classList.contains(c));
            logLeft.classList.remove(classes[index]);
            logLeft.classList.add(classes[(index + 1) % 5]);
        }

        function moveLogRight(logRight) {
            const classes = ['l1', 'l2', 'l3', 'l4', 'l5'];
            let index = classes.findIndex(c => logRight.classList.contains(c));
            logRight.classList.remove(classes[index]);
            logRight.classList.add(classes[(index + 4) % 5]);
        }

        function moveCarLeft(carLeft) {
            const classes = ['c1', 'c2', 'c3'];
            let index = classes.findIndex(c => carLeft.classList.contains(c));
            carLeft.classList.remove(classes[index]);
            carLeft.classList.add(classes[(index + 1) % 3]);
        }

        function moveCarRight(carRight) {
            const classes = ['c1', 'c2', 'c3'];
            let index = classes.findIndex(c => carRight.classList.contains(c));
            carRight.classList.remove(classes[index]);
            carRight.classList.add(classes[(index + 2) % 3]);
        }

        function lose() {
            if (squares[currentIndex].classList.contains('c1') || 
                squares[currentIndex].classList.contains('l4') || 
                squares[currentIndex].classList.contains('l5') || 
                currentTime <= 0) {
                resultDisplay.textContent = 'لقد خسرت!';
                clearInterval(timerId);
                clearInterval(outcomeTimerId);
                squares[currentIndex].classList.remove('frog');
                document.removeEventListener('keyup', moveFrog);
            }
        }

        function win() {
            if (squares[currentIndex].classList.contains('ending-block')) {
                resultDisplay.textContent = 'لقد فزت!';
                clearInterval(timerId);
                clearInterval(outcomeTimerId);
                document.removeEventListener('keyup', moveFrog);
            }
        }

        startPauseButton.addEventListener('click', () => {
            if (timerId) {
                clearInterval(timerId);
                clearInterval(outcomeTimerId);
                timerId = null;
                document.removeEventListener('keyup', moveFrog);
                startPauseButton.textContent = "Resume";
            } else {
                timerId = setInterval(autoMoveElements, 1000);
                outcomeTimerId = setInterval(checkOutComes, 50);
                document.addEventListener('keyup', moveFrog);
                startPauseButton.textContent = "Pause";
            }
        });
    </script>
</body>
</html>
