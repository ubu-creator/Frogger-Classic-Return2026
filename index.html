<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Frogger Pro - Zoro 2</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <style>
        body { margin: 0; background: #000; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }
        canvas { background: #004400; border: 2px solid #333; max-width: 95vw; max-height: 60vh; }
        .controls { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 10px; }
        .btn { background: #333; color: white; padding: 20px; border-radius: 10px; text-align: center; font-size: 24px; user-select: none; border: 1px solid #555; }
    </style>
</head>
<body>

<canvas id="gameCanvas" width="400" height="480"></canvas>

<div class="controls">
    <div style="grid-column:2" class="btn" onclick="move('up')">↑</div>
    <div style="grid-column:1" class="btn" onclick="move('left')">←</div>
    <div style="grid-column:3" class="btn" onclick="move('right')">→</div>
    <div style="grid-column:2" class="btn" onclick="move('down')">↓</div>
</div>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const grid = 40;
    const ZIP_URL = 'https://raw.githubusercontent.com/ubu-creator/Frogger-Classic-Return2026/main/frogger1.zip';

    let frog = { x: grid * 4, y: grid * 10, w: 35, h: 35 };
    let images = {};

    async function loadImagesFromZip() {
        try {
            const res = await fetch(ZIP_URL);
            const zip = await JSZip.loadAsync(await res.blob());
            for (let name in zip.files) {
                if (name.toLowerCase().endsWith('.png')) {
                    const blob = await zip.files[name].async("blob");
                    const img = new Image();
                    img.src = URL.createObjectURL(blob);
                    // نخزن الصور بأسماء بسيطة مثل frog.png
                    images[name.split('/').pop().toLowerCase()] = img;
                }
            }
            draw();
        } catch (e) { console.error("Error loading images"); draw(); }
    }

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // رسم الخلفية
        ctx.fillStyle = "#0000AA"; ctx.fillRect(0, 0, canvas.width, grid * 5); // ماء
        ctx.fillStyle = "#222"; ctx.fillRect(0, grid * 5, canvas.width, grid * 5); // طريق

        // رسم الضفدع بالصورة المستخرجة
        const fImg = images['frog.png'] || images['player.png'] || images['frogger.png'];
        if (fImg) {
            ctx.drawImage(fImg, frog.x, frog.y, frog.w, frog.h);
        } else {
            // شكل احتياطي إذا لم يجد الصورة
            ctx.fillStyle = "lime"; ctx.fillRect(frog.x, frog.y, frog.w, frog.h);
        }

        requestAnimationFrame(draw);
    }

    function move(d) {
        if (d === 'up' && frog.y > 0) frog.y -= grid;
        if (d === 'down' && frog.y < canvas.height - grid) frog.y += grid;
        if (d === 'left' && frog.x > 0) frog.x -= grid;
        if (d === 'right' && frog.x < canvas.width - grid) frog.x += grid;
    }

    loadImagesFromZip();
</script>
</body>
</html>
